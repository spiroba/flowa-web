<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta name="theme-color" content="#4F8DF9">
    <title>Flowa - Интерактивные опросы</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" sizes="180x180" href="img/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="img/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="img/favicon-16x16.png">
    
    <!-- Встроенный скрипт для диагностики -->
    <script>
        // Базовая диагностика
        console.log('Начало выполнения встроенного скрипта');
        
        // Функция для проверки console
        (function() {
            try {
                console.log('Проверка console.log');
            } catch (e) {
                window.console = { log: function() {} };
            }
        })();
        
        // Простая функция для отображения опроса
        function showSurvey() {
            console.log('Вызвана функция showSurvey');
            try {
                const container = document.getElementById('survey-content');
                console.log('Контейнер найден:', !!container);
                
                if (container) {
                    const params = new URLSearchParams(window.location.search);
                    const surveyId = params.get('surveyId') || 'DEMO';
                    console.log('ID опроса:', surveyId);
                    
                    container.innerHTML = `
                        <div class="survey-header">
                            <h3>Тестовый опрос #${surveyId}</h3>
                        </div>
                        <div class="survey-questions">
                            <div class="question">
                                <p>Работает ли опрос?</p>
                                <button onclick="alert('Да, работает!')">Да</button>
                            </div>
                        </div>
                    `;
                    console.log('Опрос отображен');
                }
            } catch (error) {
                console.error('Ошибка:', error);
            }
        }
        
        // Отслеживаем загрузку страницы
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOMContentLoaded наступил');
            showSurvey();
        });
        
        // Пробуем запустить сразу
        console.log('Пробуем запустить showSurvey немедленно');
        showSurvey();
        
        console.log('Конец выполнения встроенного скрипта');
    </script>
</head>
<body>
    <div id="app">
        <header>
            <h1>Flowa</h1>
            <p class="tagline">Удобные опросы для вашего бизнеса</p>
        </header>
        
        <main>
            <section class="survey-section">
                <h2>Опрос</h2>
                <div id="survey-content">
                    <!-- Содержимое опроса будет загружено через JavaScript -->
                    <div class="loading-spinner">
                        <div class="spinner"></div>
                        <p>Загрузка опроса...</p>
                    </div>
                </div>
            </section>
            
            <div class="info-section" style="display: none;">
                <h3>Как это работает?</h3>
                <ol>
                    <li>Отсканируйте QR-код с помощью камеры телефона</li>
                    <li>Ответьте на вопросы опроса</li>
                    <li>Отправьте свои ответы</li>
                </ol>
                <p>Спасибо за ваше участие!</p>
            </div>
        </main>
        
        <footer>
            <p>&copy; 2024 Flowa. Все права защищены.</p>
            <div class="footer-links">
                <a href="#">Политика конфиденциальности</a>
                <span class="divider">|</span>
                <a href="#">О нас</a>
            </div>
        </footer>
    </div>
</body>
</html>
